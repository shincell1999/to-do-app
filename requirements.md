Secure TODO App 要件定義書（MVP）

1. 目的（Why）

本アプリは、Webアプリケーション開発の基礎を体系的に理解することを目的とする。
特に以下の点に重点を置く。
	•	認証・認可の基本構造を理解し、事故りやすいポイントを自分で説明できるようにする
	•	マルチユーザー環境におけるデータ分離を、設計・実装の両面から理解する
	•	小さなスコープで設計判断 → 実装 → 振り返りまでを一通り経験する

学習効率を優先し、機能はあえて最小限（MVP）に絞る。

⸻

2. 想定ユーザー
	•	学習者本人
	•	複数ユーザー登録は可能だが、ユーザー同士の関係性は持たない

⸻

3. 機能要件（MVP）

3.1 認証機能
	•	ユーザー登録
	•	メールアドレス
	•	パスワード
	•	ログイン
	•	ログアウト（クライアント側でトークン破棄）

3.2 TODO管理機能
	•	TODO作成
	•	TODO一覧取得（自分のデータのみ）
	•	TODO更新
	•	TODO削除

⸻

4. 非機能要件

4.1 保守性
	•	フロントエンドとバックエンドを分離する
	•	バックエンドは責務ごとに層を分ける（例：controller / service / repository）
	•	TypeScriptを使用し、型による安全性を確保する

4.2 拡張性
	•	TODO以外のリソース（例：メモ、タグ）を将来追加できる構成とする
	•	認証方式の変更（例：セッション方式）を想定した設計とする

⸻

5. セキュリティ要件（重要）

5.1 認証
	•	パスワードは平文で保存しない
	•	パスワードはハッシュ化して保存する（bcrypt または argon2）
	•	認証状態はJWTで管理する
	•	JWTには必要最小限の情報のみを含める（user_id）
	•	JWTには有効期限を設定する

5.2 認可
	•	すべてのTODO操作は、必ずログインユーザー本人のデータのみを対象とする
	•	認可チェックはアプリケーション層だけでなく、DBアクセス時にも user_id を条件に含める

5.3 入力値検証
	•	APIの入力値は必ず検証する
	•	不正な入力値はDBに到達する前に弾く

5.4 SQL Injection 対策
	•	すべてのSQLはプレースホルダを使用する
	•	文字列連結によるSQL生成は禁止する

5.5 エラーハンドリング
	•	認証失敗時に、原因が推測できるエラーメッセージを返さない
	•	サーバー内部エラーの詳細はクライアントに返さない

⸻

6. データ要件（概要）

6.1 ユーザー
	•	ユーザーは一意に識別される
	•	メールアドレスは重複不可

6.2 TODO
	•	TODOは必ず1人のユーザーに属する
	•	他ユーザーのTODOは取得・操作できない

⸻

7. 対象外（やらないこと）
	•	SNSログイン
	•	パスワードリセット機能
	•	TODOの共有機能
	•	ロール（admin / user）管理
	•	UI/UXの作り込み
	•	通知機能
	•	CI/CD構築

⸻

8. 今後の拡張案（現時点では実装しない）
	•	タグ・カテゴリ機能
	•	操作ログ（監査ログ）
	•	管理者ロール
	•	レートリミット
	•	セキュリティヘッダ設定

⸻

9. 本アプリで重視する学習ポイント
	•	認証と認可の違いを説明できるようになること
	•	マルチユーザー環境でのデータ分離を意識した設計・実装
	•	「なぜこの設計にしたか」を言語化できること